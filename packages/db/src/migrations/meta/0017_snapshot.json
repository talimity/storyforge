{
  "version": "6",
  "dialect": "sqlite",
  "id": "5954c94c-1050-4c7c-8111-5f5000812526",
  "prevId": "3bc214a2-8d8e-4189-92b9-21536d2764a8",
  "tables": {
    "character_examples": {
      "name": "character_examples",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "character_id": {
          "name": "character_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "example_template": {
          "name": "example_template",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "created_at": {
          "name": "created_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "updated_at": {
          "name": "updated_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        }
      },
      "indexes": {},
      "foreignKeys": {
        "character_examples_character_id_characters_id_fk": {
          "name": "character_examples_character_id_characters_id_fk",
          "tableFrom": "character_examples",
          "tableTo": "characters",
          "columnsFrom": ["character_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "character_starters": {
      "name": "character_starters",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "character_id": {
          "name": "character_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "message": {
          "name": "message",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "is_primary": {
          "name": "is_primary",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": false
        },
        "created_at": {
          "name": "created_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "updated_at": {
          "name": "updated_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        }
      },
      "indexes": {},
      "foreignKeys": {
        "character_starters_character_id_characters_id_fk": {
          "name": "character_starters_character_id_characters_id_fk",
          "tableFrom": "character_starters",
          "tableTo": "characters",
          "columnsFrom": ["character_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "characters": {
      "name": "characters",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "card_type": {
          "name": "card_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'character'"
        },
        "legacy_personality": {
          "name": "legacy_personality",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "legacy_scenario": {
          "name": "legacy_scenario",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "creator": {
          "name": "creator",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "creator_notes": {
          "name": "creator_notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "custom_system_prompt": {
          "name": "custom_system_prompt",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "style_instructions": {
          "name": "style_instructions",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "tags": {
          "name": "tags",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false,
          "default": "'[]'"
        },
        "revision": {
          "name": "revision",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "tavern_card_data": {
          "name": "tavern_card_data",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "portrait": {
          "name": "portrait",
          "type": "blob",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "portrait_focal_point": {
          "name": "portrait_focal_point",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'{\"x\":0.5,\"y\":0.3,\"w\":0.5,\"h\":0.5,\"c\":0}'"
        },
        "created_at": {
          "name": "created_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "updated_at": {
          "name": "updated_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "generation_run_steps": {
      "name": "generation_run_steps",
      "columns": {
        "run_id": {
          "name": "run_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "step_id": {
          "name": "step_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "idx": {
          "name": "idx",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "model_profile_id": {
          "name": "model_profile_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "prompt_template_id": {
          "name": "prompt_template_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "model_id": {
          "name": "model_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "hints": {
          "name": "hints",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "prompts_rendered": {
          "name": "prompts_rendered",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'[]'"
        },
        "prompts_transformed": {
          "name": "prompts_transformed",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "api_payload": {
          "name": "api_payload",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "response": {
          "name": "response",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "captured_outputs": {
          "name": "captured_outputs",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false,
          "default": "'{}'"
        },
        "created_at": {
          "name": "created_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "updated_at": {
          "name": "updated_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        }
      },
      "indexes": {
        "idx_generation_run_steps_order": {
          "name": "idx_generation_run_steps_order",
          "columns": ["run_id", "idx"],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "generation_run_steps_run_id_generation_runs_id_fk": {
          "name": "generation_run_steps_run_id_generation_runs_id_fk",
          "tableFrom": "generation_run_steps",
          "tableTo": "generation_runs",
          "columnsFrom": ["run_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "generation_run_steps_model_profile_id_model_profiles_id_fk": {
          "name": "generation_run_steps_model_profile_id_model_profiles_id_fk",
          "tableFrom": "generation_run_steps",
          "tableTo": "model_profiles",
          "columnsFrom": ["model_profile_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "generation_run_steps_prompt_template_id_prompt_templates_id_fk": {
          "name": "generation_run_steps_prompt_template_id_prompt_templates_id_fk",
          "tableFrom": "generation_run_steps",
          "tableTo": "prompt_templates",
          "columnsFrom": ["prompt_template_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {
        "generation_run_steps_run_id_step_id_pk": {
          "columns": ["run_id", "step_id"],
          "name": "generation_run_steps_run_id_step_id_pk"
        }
      },
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "generation_runs": {
      "name": "generation_runs",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "scenario_id": {
          "name": "scenario_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "intent_id": {
          "name": "intent_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "effect_sequence": {
          "name": "effect_sequence",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "turn_id": {
          "name": "turn_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "participant_id": {
          "name": "participant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "workflow_id": {
          "name": "workflow_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "branch_from_turn_id": {
          "name": "branch_from_turn_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "error": {
          "name": "error",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "step_order": {
          "name": "step_order",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'[]'"
        },
        "final_outputs": {
          "name": "final_outputs",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "started_at": {
          "name": "started_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "finished_at": {
          "name": "finished_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "created_at": {
          "name": "created_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "updated_at": {
          "name": "updated_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        }
      },
      "indexes": {
        "idx_generation_runs_turn": {
          "name": "idx_generation_runs_turn",
          "columns": ["turn_id"],
          "isUnique": true,
          "where": "\"generation_runs\".\"turn_id\" IS NOT NULL"
        },
        "idx_generation_runs_intent": {
          "name": "idx_generation_runs_intent",
          "columns": ["intent_id"],
          "isUnique": false
        },
        "idx_generation_runs_scenario": {
          "name": "idx_generation_runs_scenario",
          "columns": ["scenario_id"],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "generation_runs_scenario_id_scenarios_id_fk": {
          "name": "generation_runs_scenario_id_scenarios_id_fk",
          "tableFrom": "generation_runs",
          "tableTo": "scenarios",
          "columnsFrom": ["scenario_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "generation_runs_intent_id_intents_id_fk": {
          "name": "generation_runs_intent_id_intents_id_fk",
          "tableFrom": "generation_runs",
          "tableTo": "intents",
          "columnsFrom": ["intent_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "generation_runs_turn_id_turns_id_fk": {
          "name": "generation_runs_turn_id_turns_id_fk",
          "tableFrom": "generation_runs",
          "tableTo": "turns",
          "columnsFrom": ["turn_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "generation_runs_participant_id_scenario_participants_id_fk": {
          "name": "generation_runs_participant_id_scenario_participants_id_fk",
          "tableFrom": "generation_runs",
          "tableTo": "scenario_participants",
          "columnsFrom": ["participant_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "generation_runs_workflow_id_workflows_id_fk": {
          "name": "generation_runs_workflow_id_workflows_id_fk",
          "tableFrom": "generation_runs",
          "tableTo": "workflows",
          "columnsFrom": ["workflow_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "generation_runs_branch_from_turn_id_turns_id_fk": {
          "name": "generation_runs_branch_from_turn_id_turns_id_fk",
          "tableFrom": "generation_runs",
          "tableTo": "turns",
          "columnsFrom": ["branch_from_turn_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "chk_generation_runs_status": {
          "name": "chk_generation_runs_status",
          "value": "\"generation_runs\".\"status\" IN ('running','finished','error','cancelled')"
        }
      }
    },
    "intent_effects": {
      "name": "intent_effects",
      "columns": {
        "intent_id": {
          "name": "intent_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "sequence": {
          "name": "sequence",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "kind": {
          "name": "kind",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "turn_id": {
          "name": "turn_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "created_at": {
          "name": "created_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "updated_at": {
          "name": "updated_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        }
      },
      "indexes": {
        "idx_intent_effect_turn": {
          "name": "idx_intent_effect_turn",
          "columns": ["turn_id"],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "intent_effects_intent_id_intents_id_fk": {
          "name": "intent_effects_intent_id_intents_id_fk",
          "tableFrom": "intent_effects",
          "tableTo": "intents",
          "columnsFrom": ["intent_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "intent_effects_turn_id_turns_id_fk": {
          "name": "intent_effects_turn_id_turns_id_fk",
          "tableFrom": "intent_effects",
          "tableTo": "turns",
          "columnsFrom": ["turn_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {
        "intent_effects_intent_id_sequence_pk": {
          "columns": ["intent_id", "sequence"],
          "name": "intent_effects_intent_id_sequence_pk"
        }
      },
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "intents": {
      "name": "intents",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "scenario_id": {
          "name": "scenario_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "kind": {
          "name": "kind",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "target_participant_id": {
          "name": "target_participant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "input_text": {
          "name": "input_text",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "created_at": {
          "name": "created_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "updated_at": {
          "name": "updated_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        }
      },
      "indexes": {
        "idx_one_pending_intent_per_scenario": {
          "name": "idx_one_pending_intent_per_scenario",
          "columns": ["scenario_id"],
          "isUnique": true,
          "where": "status IN ('pending','running')"
        }
      },
      "foreignKeys": {
        "intents_scenario_id_scenarios_id_fk": {
          "name": "intents_scenario_id_scenarios_id_fk",
          "tableFrom": "intents",
          "tableTo": "scenarios",
          "columnsFrom": ["scenario_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "intents_target_participant_id_scenario_participants_id_fk": {
          "name": "intents_target_participant_id_scenario_participants_id_fk",
          "tableFrom": "intents",
          "tableTo": "scenario_participants",
          "columnsFrom": ["target_participant_id"],
          "columnsTo": ["id"],
          "onDelete": "restrict",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "model_profiles": {
      "name": "model_profiles",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "provider_id": {
          "name": "provider_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "model_id": {
          "name": "model_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "capability_overrides": {
          "name": "capability_overrides",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "text_template": {
          "name": "text_template",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "created_at": {
          "name": "created_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "updated_at": {
          "name": "updated_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        }
      },
      "indexes": {},
      "foreignKeys": {
        "model_profiles_provider_id_provider_configs_id_fk": {
          "name": "model_profiles_provider_id_provider_configs_id_fk",
          "tableFrom": "model_profiles",
          "tableTo": "provider_configs",
          "columnsFrom": ["provider_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "prompt_templates": {
      "name": "prompt_templates",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "kind": {
          "name": "kind",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "version": {
          "name": "version",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 1
        },
        "layout": {
          "name": "layout",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "slots": {
          "name": "slots",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "created_at": {
          "name": "created_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "updated_at": {
          "name": "updated_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "provider_configs": {
      "name": "provider_configs",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "kind": {
          "name": "kind",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "auth": {
          "name": "auth",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "base_url": {
          "name": "base_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "capabilities": {
          "name": "capabilities",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "created_at": {
          "name": "created_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "updated_at": {
          "name": "updated_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "chk_consistent_capabilities": {
          "name": "chk_consistent_capabilities",
          "value": "(kind = 'openai-compatible' AND capabilities IS NOT NULL) OR (kind != 'openai-compatible' AND capabilities IS NULL)"
        }
      }
    },
    "scenario_participants": {
      "name": "scenario_participants",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "scenario_id": {
          "name": "scenario_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "character_id": {
          "name": "character_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "type": {
          "name": "type",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'character'"
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'active'"
        },
        "role": {
          "name": "role",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "is_user_proxy": {
          "name": "is_user_proxy",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": false
        },
        "order_index": {
          "name": "order_index",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 0
        },
        "created_at": {
          "name": "created_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "updated_at": {
          "name": "updated_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        }
      },
      "indexes": {
        "idx_scenario_character_unique": {
          "name": "idx_scenario_character_unique",
          "columns": ["scenario_id", "character_id"],
          "isUnique": true
        }
      },
      "foreignKeys": {
        "scenario_participants_scenario_id_scenarios_id_fk": {
          "name": "scenario_participants_scenario_id_scenarios_id_fk",
          "tableFrom": "scenario_participants",
          "tableTo": "scenarios",
          "columnsFrom": ["scenario_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "scenario_participants_character_id_characters_id_fk": {
          "name": "scenario_participants_character_id_characters_id_fk",
          "tableFrom": "scenario_participants",
          "tableTo": "characters",
          "columnsFrom": ["character_id"],
          "columnsTo": ["id"],
          "onDelete": "restrict",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "scenarios": {
      "name": "scenarios",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'active'"
        },
        "root_turn_id": {
          "name": "root_turn_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "anchor_turn_id": {
          "name": "anchor_turn_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "settings": {
          "name": "settings",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'{}'"
        },
        "metadata": {
          "name": "metadata",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'{}'"
        },
        "created_at": {
          "name": "created_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "updated_at": {
          "name": "updated_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        }
      },
      "indexes": {},
      "foreignKeys": {
        "scenarios_root_turn_id_turns_id_fk": {
          "name": "scenarios_root_turn_id_turns_id_fk",
          "tableFrom": "scenarios",
          "tableTo": "turns",
          "columnsFrom": ["root_turn_id"],
          "columnsTo": ["id"],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "scenarios_anchor_turn_id_turns_id_fk": {
          "name": "scenarios_anchor_turn_id_turns_id_fk",
          "tableFrom": "scenarios",
          "tableTo": "turns",
          "columnsFrom": ["anchor_turn_id"],
          "columnsTo": ["id"],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "timeline_events": {
      "name": "timeline_events",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "scenario_id": {
          "name": "scenario_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "turn_id": {
          "name": "turn_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "position": {
          "name": "position",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'after'"
        },
        "order_key": {
          "name": "order_key",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'m'"
        },
        "kind": {
          "name": "kind",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "created_at": {
          "name": "created_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "updated_at": {
          "name": "updated_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        }
      },
      "indexes": {
        "idx_events_turn": {
          "name": "idx_events_turn",
          "columns": ["turn_id", "position", "order_key"],
          "isUnique": true
        },
        "idx_events_scenario": {
          "name": "idx_events_scenario",
          "columns": ["scenario_id", "kind"],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "timeline_events_scenario_id_scenarios_id_fk": {
          "name": "timeline_events_scenario_id_scenarios_id_fk",
          "tableFrom": "timeline_events",
          "tableTo": "scenarios",
          "columnsFrom": ["scenario_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "timeline_events_turn_id_turns_id_fk": {
          "name": "timeline_events_turn_id_turns_id_fk",
          "tableFrom": "timeline_events",
          "tableTo": "turns",
          "columnsFrom": ["turn_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "chk_eventenv_position": {
          "name": "chk_eventenv_position",
          "value": "\"timeline_events\".\"position\" in ('before','after')"
        }
      }
    },
    "chapter_break_events": {
      "name": "chapter_break_events",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "next_chapter_title": {
          "name": "next_chapter_title",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "summary_text": {
          "name": "summary_text",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "summary_status": {
          "name": "summary_status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'missing'"
        },
        "summary_basis_hash": {
          "name": "summary_basis_hash",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        }
      },
      "indexes": {},
      "foreignKeys": {
        "chapter_break_events_id_timeline_events_id_fk": {
          "name": "chapter_break_events_id_timeline_events_id_fk",
          "tableFrom": "chapter_break_events",
          "tableTo": "timeline_events",
          "columnsFrom": ["id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "presence_events": {
      "name": "presence_events",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "participant_id": {
          "name": "participant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "active": {
          "name": "active",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "reason": {
          "name": "reason",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        }
      },
      "indexes": {
        "idx_presence_participant": {
          "name": "idx_presence_participant",
          "columns": ["participant_id"],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "presence_events_id_timeline_events_id_fk": {
          "name": "presence_events_id_timeline_events_id_fk",
          "tableFrom": "presence_events",
          "tableTo": "timeline_events",
          "columnsFrom": ["id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "presence_events_participant_id_scenario_participants_id_fk": {
          "name": "presence_events_participant_id_scenario_participants_id_fk",
          "tableFrom": "presence_events",
          "tableTo": "scenario_participants",
          "columnsFrom": ["participant_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "scene_set_events": {
      "name": "scene_set_events",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "scene_name": {
          "name": "scene_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        }
      },
      "indexes": {},
      "foreignKeys": {
        "scene_set_events_id_timeline_events_id_fk": {
          "name": "scene_set_events_id_timeline_events_id_fk",
          "tableFrom": "scene_set_events",
          "tableTo": "timeline_events",
          "columnsFrom": ["id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "turn_layers": {
      "name": "turn_layers",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "turn_id": {
          "name": "turn_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "key": {
          "name": "key",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "content": {
          "name": "content",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "created_at": {
          "name": "created_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "updated_at": {
          "name": "updated_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        }
      },
      "indexes": {
        "idx_turn_layer_turn": {
          "name": "idx_turn_layer_turn",
          "columns": ["turn_id"],
          "isUnique": false
        },
        "idx_turn_layer_key": {
          "name": "idx_turn_layer_key",
          "columns": ["key"],
          "isUnique": false
        },
        "idx_one_layer_per_turn_key": {
          "name": "idx_one_layer_per_turn_key",
          "columns": ["turn_id", "key"],
          "isUnique": true
        }
      },
      "foreignKeys": {
        "turn_layers_turn_id_turns_id_fk": {
          "name": "turn_layers_turn_id_turns_id_fk",
          "tableFrom": "turn_layers",
          "tableTo": "turns",
          "columnsFrom": ["turn_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "turns": {
      "name": "turns",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "scenario_id": {
          "name": "scenario_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "parent_turn_id": {
          "name": "parent_turn_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "sibling_order": {
          "name": "sibling_order",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'m'"
        },
        "author_participant_id": {
          "name": "author_participant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "created_at": {
          "name": "created_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "updated_at": {
          "name": "updated_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        }
      },
      "indexes": {
        "idx_turn_parent": {
          "name": "idx_turn_parent",
          "columns": ["parent_turn_id"],
          "isUnique": false
        },
        "idx_turn_scenario": {
          "name": "idx_turn_scenario",
          "columns": ["scenario_id"],
          "isUnique": false
        },
        "idx_uniq_turn_parent_order": {
          "name": "idx_uniq_turn_parent_order",
          "columns": ["parent_turn_id", "sibling_order"],
          "isUnique": true
        },
        "idx_one_root_per_scenario": {
          "name": "idx_one_root_per_scenario",
          "columns": ["scenario_id"],
          "isUnique": true,
          "where": "parent_turn_id IS NULL"
        }
      },
      "foreignKeys": {
        "turns_scenario_id_scenarios_id_fk": {
          "name": "turns_scenario_id_scenarios_id_fk",
          "tableFrom": "turns",
          "tableTo": "scenarios",
          "columnsFrom": ["scenario_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "turns_author_participant_id_scenario_participants_id_fk": {
          "name": "turns_author_participant_id_scenario_participants_id_fk",
          "tableFrom": "turns",
          "tableTo": "scenario_participants",
          "columnsFrom": ["author_participant_id"],
          "columnsTo": ["id"],
          "onDelete": "restrict",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "workflow_scopes": {
      "name": "workflow_scopes",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "workflow_id": {
          "name": "workflow_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "workflow_task": {
          "name": "workflow_task",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "scope_kind": {
          "name": "scope_kind",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "scenario_id": {
          "name": "scenario_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "character_id": {
          "name": "character_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "participant_id": {
          "name": "participant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "created_at": {
          "name": "created_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "updated_at": {
          "name": "updated_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        }
      },
      "indexes": {
        "idx_one_character_task_target": {
          "name": "idx_one_character_task_target",
          "columns": ["workflow_task", "character_id"],
          "isUnique": true,
          "where": "scope_kind = 'character'"
        },
        "idx_one_scenario_task_target": {
          "name": "idx_one_scenario_task_target",
          "columns": ["workflow_task", "scenario_id"],
          "isUnique": true,
          "where": "scope_kind = 'scenario'"
        },
        "idx_one_participant_task_target": {
          "name": "idx_one_participant_task_target",
          "columns": ["workflow_task", "participant_id"],
          "isUnique": true,
          "where": "scope_kind = 'participant'"
        },
        "idx_one_default_task_target": {
          "name": "idx_one_default_task_target",
          "columns": ["workflow_task"],
          "isUnique": true,
          "where": "scope_kind = 'default'"
        }
      },
      "foreignKeys": {
        "workflow_scopes_workflow_id_workflows_id_fk": {
          "name": "workflow_scopes_workflow_id_workflows_id_fk",
          "tableFrom": "workflow_scopes",
          "tableTo": "workflows",
          "columnsFrom": ["workflow_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "workflow_scopes_scenario_id_scenarios_id_fk": {
          "name": "workflow_scopes_scenario_id_scenarios_id_fk",
          "tableFrom": "workflow_scopes",
          "tableTo": "scenarios",
          "columnsFrom": ["scenario_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "workflow_scopes_character_id_characters_id_fk": {
          "name": "workflow_scopes_character_id_characters_id_fk",
          "tableFrom": "workflow_scopes",
          "tableTo": "characters",
          "columnsFrom": ["character_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "workflow_scopes_participant_id_scenario_participants_id_fk": {
          "name": "workflow_scopes_participant_id_scenario_participants_id_fk",
          "tableFrom": "workflow_scopes",
          "tableTo": "scenario_participants",
          "columnsFrom": ["participant_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "fk_workflow_scope_workflow": {
          "name": "fk_workflow_scope_workflow",
          "tableFrom": "workflow_scopes",
          "tableTo": "workflows",
          "columnsFrom": ["workflow_id", "workflow_task"],
          "columnsTo": ["id", "task"],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "chk_consistent_scope_kind": {
          "name": "chk_consistent_scope_kind",
          "value": "\n      (scope_kind = 'default')\n      OR\n      (scope_kind = 'scenario' AND scenario_id IS NOT NULL)\n      OR\n      (scope_kind = 'character' AND character_id IS NOT NULL)\n      OR\n      (scope_kind = 'participant' AND participant_id IS NOT NULL)"
        }
      }
    },
    "workflows": {
      "name": "workflows",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "task": {
          "name": "task",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "version": {
          "name": "version",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 1
        },
        "is_builtin": {
          "name": "is_builtin",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": false
        },
        "steps": {
          "name": "steps",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "created_at": {
          "name": "created_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "updated_at": {
          "name": "updated_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        }
      },
      "indexes": {
        "idx_workflows_id_task": {
          "name": "idx_workflows_id_task",
          "columns": ["id", "task"],
          "isUnique": true
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    }
  },
  "views": {
    "events_by_turn_v": {
      "columns": {
        "turn_id": {
          "name": "turn_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "position": {
          "name": "position",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "events": {
          "name": "events",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        }
      },
      "name": "events_by_turn_v",
      "isExisting": false,
      "definition": "SELECT turn_id,\n       position,\n       json_group_array(json(event_payload)) AS events\nFROM (SELECT turn_id,\n             position,\n             json_object(\n                     'id', id,\n                     'kind', kind,\n                     'orderKey', order_key,\n                     'payload', json(payload)\n             ) AS event_payload\n      FROM \"timeline_events_payload_v\"\n      ORDER BY turn_id, position, order_key)\nGROUP BY turn_id, position\n"
    },
    "timeline_events_payload_v": {
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "scenario_id": {
          "name": "scenario_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "turn_id": {
          "name": "turn_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "position": {
          "name": "position",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "order_key": {
          "name": "order_key",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "kind": {
          "name": "kind",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "payload": {
          "name": "payload",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "created_at": {
          "name": "created_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "updated_at": {
          "name": "updated_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        }
      },
      "name": "timeline_events_payload_v",
      "isExisting": false,
      "definition": "SELECT e.id,\n       e.scenario_id,\n       e.turn_id,\n       e.position,\n       e.order_key,\n       e.kind,\n       json_object(\n               'nextChapterTitle', c.next_chapter_title,\n               'summaryText', c.summary_text,\n               'summaryStatus', c.summary_status,\n               'summaryBasisHash', c.summary_basis_hash\n       ) AS payload,\n       e.created_at,\n       e.updated_at\nFROM \"timeline_events\" e\n         INNER JOIN \"chapter_break_events\" c ON c.id = e.id\nUNION ALL\nSELECT e.id,\n       e.scenario_id,\n       e.turn_id,\n       e.position,\n       e.order_key,\n       e.kind,\n       json_object(\n               'sceneName', s.scene_name,\n               'description', s.description\n       ) AS payload,\n       e.created_at,\n       e.updated_at\nFROM \"timeline_events\" e\n         INNER JOIN \"scene_set_events\" s ON s.id = e.id\nUNION ALL\nSELECT e.id,\n       e.scenario_id,\n       e.turn_id,\n       e.position,\n       e.order_key,\n       e.kind,\n       json_object(\n               'participantId', p.participant_id,\n               'active', JSON(IIF(p.active, 'true', 'false')),\n               'reason', p.reason\n       ) AS payload,\n       e.created_at,\n       e.updated_at\nFROM \"timeline_events\" e\n         INNER JOIN \"presence_events\" p ON p.id = e.id\n"
    }
  },
  "enums": {},
  "_meta": {
    "schemas": {},
    "tables": {},
    "columns": {}
  },
  "internal": {
    "indexes": {}
  }
}
