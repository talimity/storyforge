{
  "version": "6",
  "dialect": "sqlite",
  "id": "2f691e76-e49c-4b44-8ea7-87767a834365",
  "prevId": "225de2f5-1dd9-49f3-9fd2-55a31c9f6b05",
  "tables": {
    "chapters": {
      "name": "chapters",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "scenario_id": {
          "name": "scenario_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "index": {
          "name": "index",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 0
        },
        "created_at": {
          "name": "created_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "updated_at": {
          "name": "updated_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        }
      },
      "indexes": {
        "chapters_scenario_id_index_unique": {
          "name": "chapters_scenario_id_index_unique",
          "columns": ["scenario_id", "index"],
          "isUnique": true
        }
      },
      "foreignKeys": {
        "chapters_scenario_id_scenarios_id_fk": {
          "name": "chapters_scenario_id_scenarios_id_fk",
          "tableFrom": "chapters",
          "tableTo": "scenarios",
          "columnsFrom": ["scenario_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "character_examples": {
      "name": "character_examples",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "character_id": {
          "name": "character_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "example_template": {
          "name": "example_template",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "created_at": {
          "name": "created_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "updated_at": {
          "name": "updated_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        }
      },
      "indexes": {},
      "foreignKeys": {
        "character_examples_character_id_characters_id_fk": {
          "name": "character_examples_character_id_characters_id_fk",
          "tableFrom": "character_examples",
          "tableTo": "characters",
          "columnsFrom": ["character_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "character_starters": {
      "name": "character_starters",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "character_id": {
          "name": "character_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "message": {
          "name": "message",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "is_primary": {
          "name": "is_primary",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": false
        },
        "created_at": {
          "name": "created_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "updated_at": {
          "name": "updated_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        }
      },
      "indexes": {},
      "foreignKeys": {
        "character_starters_character_id_characters_id_fk": {
          "name": "character_starters_character_id_characters_id_fk",
          "tableFrom": "character_starters",
          "tableTo": "characters",
          "columnsFrom": ["character_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "characters": {
      "name": "characters",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "card_type": {
          "name": "card_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'character'"
        },
        "legacy_personality": {
          "name": "legacy_personality",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "legacy_scenario": {
          "name": "legacy_scenario",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "creator": {
          "name": "creator",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "creator_notes": {
          "name": "creator_notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "custom_system_prompt": {
          "name": "custom_system_prompt",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "custom_post_history_instructions": {
          "name": "custom_post_history_instructions",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "tags": {
          "name": "tags",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false,
          "default": "'[]'"
        },
        "revision": {
          "name": "revision",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "tavern_card_data": {
          "name": "tavern_card_data",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "portrait": {
          "name": "portrait",
          "type": "blob",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "portrait_focal_point": {
          "name": "portrait_focal_point",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'{\"x\":0.5,\"y\":0.3,\"w\":0.5,\"h\":0.5,\"c\":0}'"
        },
        "created_at": {
          "name": "created_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "updated_at": {
          "name": "updated_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "intent_effects": {
      "name": "intent_effects",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "intent_id": {
          "name": "intent_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "kind": {
          "name": "kind",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "turn_id": {
          "name": "turn_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "created_at": {
          "name": "created_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "updated_at": {
          "name": "updated_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        }
      },
      "indexes": {},
      "foreignKeys": {
        "intent_effects_intent_id_intents_id_fk": {
          "name": "intent_effects_intent_id_intents_id_fk",
          "tableFrom": "intent_effects",
          "tableTo": "intents",
          "columnsFrom": ["intent_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "intent_effects_turn_id_turns_id_fk": {
          "name": "intent_effects_turn_id_turns_id_fk",
          "tableFrom": "intent_effects",
          "tableTo": "turns",
          "columnsFrom": ["turn_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "intents": {
      "name": "intents",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "scenario_id": {
          "name": "scenario_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "kind": {
          "name": "kind",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "target_participant_id": {
          "name": "target_participant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "parameters": {
          "name": "parameters",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "created_at": {
          "name": "created_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "updated_at": {
          "name": "updated_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        }
      },
      "indexes": {
        "idx_one_pending_intent_per_scenario": {
          "name": "idx_one_pending_intent_per_scenario",
          "columns": ["scenario_id"],
          "isUnique": true,
          "where": "status = 'pending'"
        }
      },
      "foreignKeys": {
        "intents_scenario_id_scenarios_id_fk": {
          "name": "intents_scenario_id_scenarios_id_fk",
          "tableFrom": "intents",
          "tableTo": "scenarios",
          "columnsFrom": ["scenario_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "intents_target_participant_id_scenario_participants_id_fk": {
          "name": "intents_target_participant_id_scenario_participants_id_fk",
          "tableFrom": "intents",
          "tableTo": "scenario_participants",
          "columnsFrom": ["target_participant_id"],
          "columnsTo": ["id"],
          "onDelete": "restrict",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "model_profiles": {
      "name": "model_profiles",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "provider_id": {
          "name": "provider_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "model_id": {
          "name": "model_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "created_at": {
          "name": "created_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "updated_at": {
          "name": "updated_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        }
      },
      "indexes": {},
      "foreignKeys": {
        "model_profiles_provider_id_provider_configs_id_fk": {
          "name": "model_profiles_provider_id_provider_configs_id_fk",
          "tableFrom": "model_profiles",
          "tableTo": "provider_configs",
          "columnsFrom": ["provider_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "prompt_templates": {
      "name": "prompt_templates",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "kind": {
          "name": "kind",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "version": {
          "name": "version",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 1
        },
        "layout": {
          "name": "layout",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "slots": {
          "name": "slots",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "created_at": {
          "name": "created_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "updated_at": {
          "name": "updated_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "provider_configs": {
      "name": "provider_configs",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "kind": {
          "name": "kind",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "auth": {
          "name": "auth",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "base_url": {
          "name": "base_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "created_at": {
          "name": "created_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "updated_at": {
          "name": "updated_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "scenario_participants": {
      "name": "scenario_participants",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "scenario_id": {
          "name": "scenario_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "character_id": {
          "name": "character_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "type": {
          "name": "type",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'character'"
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'active'"
        },
        "role": {
          "name": "role",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "is_user_proxy": {
          "name": "is_user_proxy",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": false
        },
        "order_index": {
          "name": "order_index",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 0
        },
        "created_at": {
          "name": "created_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "updated_at": {
          "name": "updated_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        }
      },
      "indexes": {
        "idx_scenario_character_unique": {
          "name": "idx_scenario_character_unique",
          "columns": ["scenario_id", "character_id"],
          "isUnique": true
        }
      },
      "foreignKeys": {
        "scenario_participants_scenario_id_scenarios_id_fk": {
          "name": "scenario_participants_scenario_id_scenarios_id_fk",
          "tableFrom": "scenario_participants",
          "tableTo": "scenarios",
          "columnsFrom": ["scenario_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "scenario_participants_character_id_characters_id_fk": {
          "name": "scenario_participants_character_id_characters_id_fk",
          "tableFrom": "scenario_participants",
          "tableTo": "characters",
          "columnsFrom": ["character_id"],
          "columnsTo": ["id"],
          "onDelete": "restrict",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "scenarios": {
      "name": "scenarios",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'active'"
        },
        "root_turn_id": {
          "name": "root_turn_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "anchor_turn_id": {
          "name": "anchor_turn_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "settings": {
          "name": "settings",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'{}'"
        },
        "metadata": {
          "name": "metadata",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'{}'"
        },
        "created_at": {
          "name": "created_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "updated_at": {
          "name": "updated_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        }
      },
      "indexes": {},
      "foreignKeys": {
        "scenarios_root_turn_id_turns_id_fk": {
          "name": "scenarios_root_turn_id_turns_id_fk",
          "tableFrom": "scenarios",
          "tableTo": "turns",
          "columnsFrom": ["root_turn_id"],
          "columnsTo": ["id"],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "scenarios_anchor_turn_id_turns_id_fk": {
          "name": "scenarios_anchor_turn_id_turns_id_fk",
          "tableFrom": "scenarios",
          "tableTo": "turns",
          "columnsFrom": ["anchor_turn_id"],
          "columnsTo": ["id"],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "turn_layers": {
      "name": "turn_layers",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "turn_id": {
          "name": "turn_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "key": {
          "name": "key",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "content": {
          "name": "content",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "created_at": {
          "name": "created_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "updated_at": {
          "name": "updated_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        }
      },
      "indexes": {
        "idx_turn_layer_turn": {
          "name": "idx_turn_layer_turn",
          "columns": ["turn_id"],
          "isUnique": false
        },
        "idx_turn_layer_key": {
          "name": "idx_turn_layer_key",
          "columns": ["key"],
          "isUnique": false
        },
        "idx_one_layer_per_turn_key": {
          "name": "idx_one_layer_per_turn_key",
          "columns": ["turn_id", "key"],
          "isUnique": true
        }
      },
      "foreignKeys": {
        "turn_layers_turn_id_turns_id_fk": {
          "name": "turn_layers_turn_id_turns_id_fk",
          "tableFrom": "turn_layers",
          "tableTo": "turns",
          "columnsFrom": ["turn_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "turns": {
      "name": "turns",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "scenario_id": {
          "name": "scenario_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "chapter_id": {
          "name": "chapter_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "parent_turn_id": {
          "name": "parent_turn_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "sibling_order": {
          "name": "sibling_order",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'m'"
        },
        "author_participant_id": {
          "name": "author_participant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "created_at": {
          "name": "created_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "updated_at": {
          "name": "updated_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        }
      },
      "indexes": {
        "idx_turn_parent": {
          "name": "idx_turn_parent",
          "columns": ["parent_turn_id"],
          "isUnique": false
        },
        "idx_turn_scenario": {
          "name": "idx_turn_scenario",
          "columns": ["scenario_id"],
          "isUnique": false
        },
        "idx_uniq_turn_parent_order": {
          "name": "idx_uniq_turn_parent_order",
          "columns": ["parent_turn_id", "sibling_order"],
          "isUnique": true
        },
        "idx_one_root_per_scenario": {
          "name": "idx_one_root_per_scenario",
          "columns": ["scenario_id"],
          "isUnique": true,
          "where": "parent_turn_id IS NULL"
        }
      },
      "foreignKeys": {
        "turns_scenario_id_scenarios_id_fk": {
          "name": "turns_scenario_id_scenarios_id_fk",
          "tableFrom": "turns",
          "tableTo": "scenarios",
          "columnsFrom": ["scenario_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "turns_chapter_id_chapters_id_fk": {
          "name": "turns_chapter_id_chapters_id_fk",
          "tableFrom": "turns",
          "tableTo": "chapters",
          "columnsFrom": ["chapter_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "turns_author_participant_id_scenario_participants_id_fk": {
          "name": "turns_author_participant_id_scenario_participants_id_fk",
          "tableFrom": "turns",
          "tableTo": "scenario_participants",
          "columnsFrom": ["author_participant_id"],
          "columnsTo": ["id"],
          "onDelete": "restrict",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "workflow_scopes": {
      "name": "workflow_scopes",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "workflow_id": {
          "name": "workflow_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "workflow_task": {
          "name": "workflow_task",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "scope_kind": {
          "name": "scope_kind",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "scenario_id": {
          "name": "scenario_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "character_id": {
          "name": "character_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "participant_id": {
          "name": "participant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "created_at": {
          "name": "created_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "updated_at": {
          "name": "updated_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        }
      },
      "indexes": {
        "idx_one_character_task_target": {
          "name": "idx_one_character_task_target",
          "columns": ["workflow_task", "character_id"],
          "isUnique": true,
          "where": "scope_kind = 'character'"
        },
        "idx_one_scenario_task_target": {
          "name": "idx_one_scenario_task_target",
          "columns": ["workflow_task", "scenario_id"],
          "isUnique": true,
          "where": "scope_kind = 'scenario'"
        },
        "idx_one_participant_task_target": {
          "name": "idx_one_participant_task_target",
          "columns": ["workflow_task", "participant_id"],
          "isUnique": true,
          "where": "scope_kind = 'participant'"
        },
        "idx_one_default_task_target": {
          "name": "idx_one_default_task_target",
          "columns": ["workflow_task"],
          "isUnique": true,
          "where": "scope_kind = 'default'"
        }
      },
      "foreignKeys": {
        "workflow_scopes_workflow_id_workflows_id_fk": {
          "name": "workflow_scopes_workflow_id_workflows_id_fk",
          "tableFrom": "workflow_scopes",
          "tableTo": "workflows",
          "columnsFrom": ["workflow_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "workflow_scopes_scenario_id_scenarios_id_fk": {
          "name": "workflow_scopes_scenario_id_scenarios_id_fk",
          "tableFrom": "workflow_scopes",
          "tableTo": "scenarios",
          "columnsFrom": ["scenario_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "workflow_scopes_character_id_characters_id_fk": {
          "name": "workflow_scopes_character_id_characters_id_fk",
          "tableFrom": "workflow_scopes",
          "tableTo": "characters",
          "columnsFrom": ["character_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "workflow_scopes_participant_id_scenario_participants_id_fk": {
          "name": "workflow_scopes_participant_id_scenario_participants_id_fk",
          "tableFrom": "workflow_scopes",
          "tableTo": "scenario_participants",
          "columnsFrom": ["participant_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "fk_workflow_scope_workflow": {
          "name": "fk_workflow_scope_workflow",
          "tableFrom": "workflow_scopes",
          "tableTo": "workflows",
          "columnsFrom": ["workflow_id", "workflow_task"],
          "columnsTo": ["id", "task"],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "chk_consistent_scope_kind": {
          "name": "chk_consistent_scope_kind",
          "value": "\n      (scope_kind = 'default')\n      OR\n      (scope_kind = 'scenario' AND scenario_id IS NOT NULL)\n      OR\n      (scope_kind = 'character' AND character_id IS NOT NULL)\n      OR\n      (scope_kind = 'participant' AND participant_id IS NOT NULL)"
        }
      }
    },
    "workflows": {
      "name": "workflows",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "task": {
          "name": "task",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "version": {
          "name": "version",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 1
        },
        "is_builtin": {
          "name": "is_builtin",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": false
        },
        "steps": {
          "name": "steps",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "created_at": {
          "name": "created_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "updated_at": {
          "name": "updated_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        }
      },
      "indexes": {
        "idx_workflows_id_task": {
          "name": "idx_workflows_id_task",
          "columns": ["id", "task"],
          "isUnique": true
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    }
  },
  "views": {},
  "enums": {},
  "_meta": {
    "schemas": {},
    "tables": {},
    "columns": {}
  },
  "internal": {
    "indexes": {}
  }
}
